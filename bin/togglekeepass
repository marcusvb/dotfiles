#!/usr/bin/env bash

OUTPUT=$(cat /Applications/KeePassXC.app/Contents/Info.plist | grep -m1 '<string>' | grep -Eo '[0-9]')

echo "$OUTPUT"
if [ "$OUTPUT" -eq 0 ]
then
    sed -i bak -e 's|\<string\>0\<\/string\>|\<string\>1\<\/string\>|g' /Applications/KeePassXC.app/Contents/Info.plist;
    sleep 1;
    pkill KeePassXC;
    sleep 1;
    open -a KeePassXC;
else
    sed -i bak -e 's|\<string\>1\<\/string\>|\<string\>0\<\/string\>|g' /Applications/KeePassXC.app/Contents/Info.plist;
    sleep 1;
    pkill KeePassXC;
    sleep 1;
    open -a KeePassXC;
fi

